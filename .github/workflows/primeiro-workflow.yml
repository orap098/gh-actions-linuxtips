name: Desafio 1

on:
  workflow_dispatch:
   inputs:
      imagem_docker:
        type: string

jobs:
  Vulnerabilidade_Docker:
    runs-on: ubuntu-latest
    steps:
      - name: Docker pull
        run: docker pull ${{ github.event.inputs.imagem_docker }}

      - name: Lista Imagens docker
        run: docker images

      - name: Docker Login
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}

      - name: Relat√≥rio de Vulnerabilidade da imagem
        id: docker-scout
        uses: docker/scout-action@v1
        with:
          command: cves,recommendations,compare
          to-latest: true
          ignore-base: true
          ignore-unchanged: true
          only-fixed: true

      - name: Finalizado
        run: echo 'FINALIZADO'

